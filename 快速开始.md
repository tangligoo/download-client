# 快速开始指南

## 项目已创建完成! 🎉

### 项目概览

这是一个功能完整的JavaFX文件传输系统，包含:

✅ **客户端功能**:
- 自动生成AppKey进行身份验证
- 系统托盘支持(最小化、右键菜单)
- 每5秒自动轮询服务器文件列表
- 传输列表界面显示下载进度
- TCP断点续传功能
- 可配置的设置界面

✅ **服务端功能**:
- HTTP API提供文件列表
- TCP服务器提供文件下载
- AppKey验证机制
- 支持断点续传

### 文件结构

```
ztxa/
├── pom.xml                          # Maven配置
├── README.md                        # 详细文档
├── .gitignore                       # Git忽略文件
├── run-server.bat/sh                # 服务端启动脚本
├── run-client.bat/sh                # 客户端启动脚本
│
└── src/main/
    ├── java/com/ztxa/
    │   ├── client/                  # 客户端代码
    │   │   ├── FileTransferApp.java # 主程序
    │   │   ├── config/              # 配置管理
    │   │   ├── model/               # 数据模型
    │   │   ├── service/             # 业务服务
    │   │   └── ui/                  # UI控制器
    │   │
    │   └── server/                  # 服务端代码
    │       ├── FileTransferServer.java
    │       └── model/
    │
    └── resources/fxml/              # UI界面定义
```

### 运行前准备

1. **安装Java 17+**
   - 下载: https://adoptium.net/
   - 配置JAVA_HOME环境变量

2. **安装Maven 3.6+**
   - 下载: https://maven.apache.org/download.cgi
   - 配置PATH环境变量

3. **验证安装**
   ```bash
   java -version    # 应显示Java 17或更高版本
   mvn -version     # 应显示Maven 3.6或更高版本
   ```

### 快速启动

#### Windows系统

1. **启动服务端**
   ```cmd
   双击 run-server.bat
   ```
   或命令行:
   ```cmd
   mvn compile exec:java -Dexec.mainClass="com.qoder.server.FileTransferServer"
   ```

2. **启动客户端**
   ```cmd
   双击 run-client.bat
   ```
   或命令行:
   ```cmd
   mvn javafx:run
   ```

#### Linux/Mac系统

1. **赋予执行权限**
   ```bash
   chmod +x run-server.sh run-client.sh
   ```

2. **启动服务端**
   ```bash
   ./run-server.sh
   ```

3. **启动客户端**
   ```bash
   ./run-client.sh
   ```

### 使用步骤

1. **启动服务端**
   - 服务端会在当前目录创建 `share` 文件夹
   - HTTP服务监听 8080端口
   - TCP服务监听 9090端口

2. **添加测试文件**
   - 将要传输的文件放入 `share` 文件夹

3. **启动客户端**
   - 客户端会自动最小化到系统托盘
   - 生成的AppKey保存在: `~/.file-transfer-client/appkey.txt`
   - 每5秒自动检查服务器文件列表

4. **查看传输**
   - 双击托盘图标打开传输列表
   - 或右键托盘图标选择"传输列表"
   - 下载进度、速度、状态实时显示

5. **修改设置**
   - 右键托盘图标选择"设置"
   - 可修改服务器地址、下载路径、轮询间隔

### 功能测试

#### 测试正常下载
1. 启动服务端
2. 在 `share` 目录放入文件 (如 test.txt)
3. 启动客户端
4. 等待5秒,传输列表会自动打开
5. 文件开始自动下载

#### 测试断点续传
1. 下载一个大文件 (如 100MB)
2. 在传输列表中右键点击任务 → 选择"取消"
3. 重启客户端(或等待下次轮询)
4. 文件会从上次中断位置继续下载

### 配置文件位置

- **客户端配置**: `~/.file-transfer-client/config.json`
- **AppKey**: `~/.file-transfer-client/appkey.txt`
- **服务端共享目录**: `./share/`

### 默认配置

```json
{
  "serverUrl": "http://localhost:8080",
  "downloadPath": "~/Downloads",
  "pollInterval": 5
}
```

### 端口说明

- **8080**: HTTP API端口 (获取文件列表)
- **9090**: TCP下载端口 (文件传输)

### 常见问题

**Q: 托盘图标不显示?**
A: 确保系统托盘功能已启用，Windows系统检查任务栏设置

**Q: 连接服务器失败?**
A: 
1. 检查服务端是否正常运行
2. 检查防火墙设置
3. 在设置中修改服务器地址

**Q: 下载速度慢?**
A: TCP传输默认缓冲区8KB，可以在 FileDownloadService.java 中调整 BUFFER_SIZE

**Q: Maven命令不可用?**
A: 
1. 确认Maven已安装
2. 配置环境变量 PATH
3. 重启命令行窗口

### 技术栈

- **JavaFX 21** - 现代化UI框架
- **Apache HttpClient 5** - HTTP客户端
- **Gson** - JSON序列化
- **Java AWT** - 系统托盘支持
- **Java NIO** - 文件IO操作
- **TCP Socket** - 文件传输协议

### 开发建议

1. **IDE推荐**: IntelliJ IDEA 或 Eclipse
2. **导入项目**: 选择 pom.xml 作为Maven项目导入
3. **运行配置**: 
   - 客户端: 运行 FileTransferApp.main()
   - 服务端: 运行 FileTransferServer.main()

### 下一步扩展

可以考虑添加以下功能:
- [ ] 多线程并发下载
- [ ] 文件MD5校验
- [ ] 下载队列管理
- [ ] 上传文件功能
- [ ] 数据库存储AppKey
- [ ] HTTPS/SSL加密传输
- [ ] 多服务器负载均衡
- [ ] 断点续传优化(分片下载)

### 获取帮助

详细文档请参考: [README.md](README.md)

---

**祝你使用愉快！** 🚀
